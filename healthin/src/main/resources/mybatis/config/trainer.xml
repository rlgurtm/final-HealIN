<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="trainer">

	<resultMap type="trainerVO" id="trainerRM">
		<result property="membervo.id" column="id" />
		<result property="membervo.name" column="name" />
		<result property="trainerPhoto" column="trainer_photo"/>
	</resultMap>

 	<select id="getTrainerTotalCount" resultType="int" >
 		select count(*) from trainer
 	</select>

	<select id="getTrainerList" resultMap="trainerRM" parameterType="pagingBean">
       select a.* from 
       (select row_number() over(order by rank desc) rnum,
       id,name,location,career,rank,trainer_photo
       from trainer t,health_member m
       where t.trainer_id=m.id) a 
       where rnum between #{startRowNumber} and #{endRowNumber}
    </select>
    <select id="trainerListOrder" resultMap="trainerRM" parameterType="map">
       select a.* from 
       (select row_number() over(order by #{ORDER} desc) rnum,
       id,name,location,career,rank,trainer_photo
       from trainer t,health_member m,
       where t.trainer_id=m.id) a 
       where rnum between #{STARTROWNUM} and #{ENDROWNUM}
    </select>
    
</mapper>