<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tip">
	<resultMap type="tipBoardVO" id="tipBoardRM">
		<result property="memberVO.id" column="id" />
		<result property="memberVO.name" column="name" />
	</resultMap>
 	<select id="getTipBoardList" resultMap="tipBoardRM" parameterType="pagingBean">
 		select t.board_no as no,t.title,t.hits,t.posted_date,t.category,m.id,m.name
 		from (
		select row_number() over(order by board_no desc) as rnum,board_no,title,hits,
		to_char(posted_date,'YYYY.MM.DD') as posted_date,category,id,tipqna
		from tipandqna
		) t,health_member m 
 		where t.id=m.id and t.tipqna='tip' and rnum between #{startRowNumber} and #{endRowNumber}
 	</select>
 	<select id="getTotalTipCount" resultType="int" >
 		select count(*) from tipandqna where tipqna='tip'
 	</select>
 	<select id="tipBoardCategoryList" resultMap="tipBoardRM" parameterType="map"  >
		select a.* from
		(select row_number() over(order by board_no desc) rnum,t.board_no as no,t.title,t.hits,
		to_char(t.posted_date,'YYYY.MM.DD') as posted_date,t.category,t.id,t.tipqna,m.name
		from tipandqna t,health_member m
		where t.id=m.id and t.tipqna='tip' and t.category=#{category}) a 
        where rnum between #{startRowNumber} and #{endRowNumber}
 	</select>
 	<select id="getTotalTipCategoryCount" resultType="int" >
 		select count(*) from tipandqna where tipqna='tip' and category=#{value}
 	</select>
</mapper>

<!-- 
	<selectKey keyProperty="no" resultType="int" order="BEFORE">
		select spring_board_inst_seq.nextval from dual
	</selectKey> 
-->

 
 
 
 
 
 
 
 
 
 
 
 
 
 
















